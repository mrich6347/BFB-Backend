{
  "name": "Month Rollover Verification Test",
  "description": "Test that verifies the expected state after month rollover has occurred. This test documents what the system should look like after automatic month rollover logic has been triggered, with assigned amounts reset to 0, activity reset to 0, and available balances carried forward.",
  "steps": [
    {
      "action": "create_budget",
      "description": "Create test budget to simulate post-rollover state",
      "params": {
        "name": "Post-Rollover Test Budget",
        "currency": "USD",
        "currency_placement": "BEFORE",
        "date_format": "US_SLASH",
        "number_format": "DOT_COMMA"
      }
    },
    {
      "action": "create_account",
      "description": "Create checking account (balance carries over from previous month)",
      "params": {
        "name": "Checking",
        "account_type": "CASH",
        "account_balance": 1450
      }
    },
    {
      "action": "create_category_group",
      "description": "Create Monthly Expenses category group",
      "params": {
        "name": "Monthly Expenses"
      }
    },
    {
      "action": "create_category",
      "description": "Create Groceries category",
      "params": {
        "name": "Groceries",
        "category_group_name": "Monthly Expenses"
      }
    },
    {
      "action": "create_category",
      "description": "Create Rent category",
      "params": {
        "name": "Rent",
        "category_group_name": "Monthly Expenses"
      }
    },
    {
      "action": "create_category",
      "description": "Create Utilities category",
      "params": {
        "name": "Utilities",
        "category_group_name": "Monthly Expenses"
      }
    },
    {
      "action": "create_category_group",
      "description": "Create Savings category group",
      "params": {
        "name": "Savings"
      }
    },
    {
      "action": "create_category",
      "description": "Create Emergency Fund category",
      "params": {
        "name": "Emergency Fund",
        "category_group_name": "Savings"
      }
    },
    {
      "action": "create_category",
      "description": "Create Vacation category",
      "params": {
        "name": "Vacation",
        "category_group_name": "Savings"
      }
    },
    {
      "action": "get_state",
      "description": "Get initial state - should show new month with carried-over available balances"
    }
  ],
  "expectedFinalState": {
    "readyToAssign": 1450,
    "accounts": {
      "Checking": {
        "working_balance": 1450
      }
    },
    "categories": {
      "Groceries": {
        "assigned": 0,
        "activity": 0,
        "available": 50
      },
      "Rent": {
        "assigned": 0,
        "activity": 0,
        "available": 0
      },
      "Utilities": {
        "assigned": 0,
        "activity": 0,
        "available": -50
      },
      "Emergency Fund": {
        "assigned": 0,
        "activity": 0,
        "available": 300
      },
      "Vacation": {
        "assigned": 0,
        "activity": 0,
        "available": -50
      }
    }
  },
  "ynabBehaviorNotes": [
    "This test verifies the expected state AFTER month rollover has occurred:",
    "1. ASSIGNED AMOUNTS: All reset to $0 (new month starts fresh)",
    "2. ACTIVITY: All reset to $0 (no transactions yet in new month)",
    "3. AVAILABLE BALANCES: Carried forward from previous month:",
    "   - Groceries: +$50 (had leftover money)",
    "   - Rent: $0 (spent exactly what was assigned)",
    "   - Utilities: -$50 (overspent, debt carries forward)",
    "   - Emergency Fund: +$300 (no spending, full amount available)",
    "   - Vacation: -$50 (overspent, debt carries forward)",
    "4. READY TO ASSIGN: Should equal account balance since no money is assigned yet",
    "5. TIMEZONE CONTEXT: Month rollover respects user's timezone for determining 'current month'",
    "6. NEGATIVE BALANCES: Overspending from previous month creates starting debt in new month",
    "7. POSITIVE BALANCES: Unspent money from previous month is available for new month",
    "This represents the clean slate that users see when a new month begins in YNAB"
  ]
}
